<div>
  <label for="select-full" class="clr-control-label select-app-text">Application</label>
  <div class="clr-select-wrapper select-app-placeholder">
    <select id="select-full" class="clr-select" [(ngModel)]="selectedAppId" [ngModelOptions]="{standalone: true}" (change)="appChanged()">
      <option class="select-app-option" value="{{filteredApplicationScore.appId}}" *ngFor="let filteredApplicationScore of filteredApplicationScores">{{filteredApplicationScore.name}}</option>
    </select>
    <label *ngIf="applicationSelected">LOC <span class="badge badge-info" *ngIf="applicationSelected">{{applicationSelected.slocCnt}}</span></label>
    <label *ngIf="applicationSelected">Files <span class="badge badge-info" *ngIf="applicationSelected">{{applicationSelected.filesCnt}}</span></label>
  </div>

</div>

<div *ngIf="applicationSelected">
  <clr-tabs class="application-summary-tabs">
    <clr-tab class="findings-tab">
      <button clrTabLink>Findings</button>
      
      <clr-tab-content *clrIfActive>

        <div class="clr-row">
          <div class="clr-col-2" *ngFor="let bin of applicationSelected.bins">
            <span class="label label-light-blue">{{bin.name}}<span class="badge badge-light-blue">2</span></span>
          </div>
        </div>

        <div class="clr-row">
          <div class="clr-col" *ngFor="let tag of applicationSelected.tags">
            <span class="label label-info">{{tag.Value}}<span class="badge badge-info">2</span></span>
          </div>
        </div>

        <div class="clr-row">
          <div class="clr-col-lg-2">
            <div class="card card-green">
              <div class="card-img" align="center">
                <cds-icon shape="thermometer badge-color-white"></cds-icon>
              </div>
              <div class="card-block">
                <h4 class="card-title badge-color-white" align="center">Low</h4>
                <p class="card-text badge-color-white" align="center">{{scoreCard.low}}</p>
              </div>
            </div>
          </div>
          
          <div class="clr-col-lg-2">
            <div class="card card-orange">
              <div class="card-img badge-color-white" align="center">
                <cds-icon shape="thermometer"></cds-icon>
              </div>
              <div class="card-block">
                <h4 class="card-title badge-color-white" align="center">Medium</h4>
                <p class="card-text badge-color-white" align="center">{{scoreCard.medium}}</p>
              </div>
            </div>
          </div>

          <div class="clr-col-lg-2">
            <div class="card card-red">
              <div class="card-img badge-color-white" align="center">
                <cds-icon shape="thermometer"></cds-icon>
              </div>
              <div class="card-block">
                <h4 class="card-title badge-color-white" align="center">High</h4>
                <p class="card-text badge-color-white" align="center">{{scoreCard.high}}</p>
              </div>
            </div>
          </div>

          <div class="clr-col-lg-2">
            <div class="card card-grey">
              <div class="card-img badge-color-white" align="center">
                <cds-icon shape="pinboard"></cds-icon>
              </div>
              <div class="card-block">
                <h4 class="card-title badge-color-white" align="center">Findings</h4>
                <p class="card-text badge-color-white" align="center">{{scoreCard.total}}</p>
              </div>
            </div>
          </div>

          <div class="clr-col-lg-2">
            <div class="card card-blue">
              <div class="card-img badge-color-white" align="center">
                <cds-icon shape="target"></cds-icon>
              </div>
              <div class="card-block">
                <h4 class="card-title badge-color-white" align="center">Score</h4>
                <p class="card-text badge-color-white" align="center">{{applicationSelected.score}}</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- <clr-row *ngFor="let tag of tags">
          <span class="label label-orange">{{tag}}<span class="badge badge-info">2</span></span> -->
          <!-- <clr-dg-cell>{{user.name}}</clr-dg-cell>
          <clr-dg-cell>{{user.creation | date}}</clr-dg-cell> -->
          <!-- <clr-dg-cell>
            <span class="color-square" [style.backgroundColor]="user.color"></span>
          </clr-dg-cell> -->
        <!-- </clr-row> -->
        
        <clr-datagrid class="summary-grid">
          
          <clr-dg-action-bar>
            <app-excel-export [data]="applicationFindings" [file_name]="'app-summary.xlsx'"></app-excel-export>
          </clr-dg-action-bar>

          <clr-dg-column [clrDgField]="'id'">ID</clr-dg-column>
          <clr-dg-column [clrDgField]="'level'" [clrDgColType]="'string'">Level</clr-dg-column>
          <clr-dg-column [clrDgField]="'value'" [clrDgColType]="'string'">Value</clr-dg-column>
          <clr-dg-column [clrDgField]="'filename'" [clrDgColType]="'string'" >Filename</clr-dg-column>
          <clr-dg-column [clrDgField]="'line'" [clrDgColType]="'number'">Line #</clr-dg-column>
          <clr-dg-column [clrDgField]="'effort'" [clrDgColType]="'number'">Effort</clr-dg-column>
          <clr-dg-column [clrDgField]="'tags'" [clrDgColType]="'number'"># Tags</clr-dg-column>
          <clr-dg-column [clrDgField]="'recipes'" [clrDgColType]="'number'"># Recipes</clr-dg-column>

          <clr-dg-row *clrDgItems="let applicationFinding of applicationFindings">
            <clr-dg-cell>{{applicationFinding.id}}</clr-dg-cell>
            <clr-dg-cell>{{applicationFinding.level}}</clr-dg-cell>
            <clr-dg-cell>{{applicationFinding.value}}</clr-dg-cell>
            <clr-dg-cell>{{applicationFinding.filename}}</clr-dg-cell>
            <clr-dg-cell>{{applicationFinding.line}}</clr-dg-cell>
            <clr-dg-cell>{{applicationFinding.effort}}</clr-dg-cell>
            <clr-dg-cell>{{applicationFinding.tags.length}}</clr-dg-cell>
            <clr-dg-cell>{{applicationFinding.recipes}}</clr-dg-cell>
          </clr-dg-row>

          <clr-dg-footer>
            <clr-dg-pagination #pagination [clrDgPageSize]="25">
              <clr-dg-page-size [clrPageSizeOptions]="[25,50,100]">Findings per page</clr-dg-page-size>
              {{pagination.firstItem + 1}} - {{pagination.lastItem + 1}}
              of {{pagination.totalItems}} findings (filtered) showing for portfolio...
            </clr-dg-pagination>
          </clr-dg-footer>
        </clr-datagrid>
      </clr-tab-content>
    </clr-tab>
    <clr-tab class="languages-tab">
      <button clrTabLink>Languages</button>
      <clr-tab-content *clrIfActive="false">
        <div class="summary-charts">
        <div class="summary-chart">
        </div>
        <div class="summary-chart">
        </div>
        </div>
      </clr-tab-content>
    </clr-tab>
    <clr-tab class="apis-tab">
      <button clrTabLink>APIs</button>
      <clr-tab-content *clrIfActive="false">
        <div class="summary-charts">
        <div class="summary-chart">
        </div>
        <div class="summary-chart">
        </div>
        </div>
      </clr-tab-content>
    </clr-tab>
  </clr-tabs>

</div>