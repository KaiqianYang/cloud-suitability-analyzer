{"ast":null,"code":"import { ClarityIcons, downloadIcon } from '@cds/core/icon';\nimport '@cds/core/icon/register.js';\nimport '@cds/core/search/register.js';\nimport { pushErrorNotification } from '../../utils/notificationutil';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/rules.service\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@clr/angular\";\nimport * as i7 from \"../common/excel-export/excel-export.component\";\nimport * as i8 from \"../../pipes/search-filter.pipe\";\n\nfunction RulesComponent_clr_tab_content_5_clr_dg_row_29_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tag_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(tag_r6.Value);\n  }\n}\n\nfunction RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const rule_r3 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", rule_r3.DefaultPattern, \" \");\n  }\n}\n\nfunction RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_ul_8_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const pattern_r16 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", pattern_r16.Value, \" \");\n  }\n}\n\nfunction RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_ul_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtemplate(1, RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_ul_8_li_1_Template, 2, 1, \"li\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const rule_r3 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", rule_r3.Patterns);\n  }\n}\n\nfunction RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"None\");\n  }\n}\n\nfunction RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_ul_14_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 25);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const recipe_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"href\", recipe_r19.uri, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(recipe_r19.id);\n  }\n}\n\nfunction RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_ul_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtemplate(1, RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_ul_14_li_1_Template, 3, 2, \"li\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const rule_r3 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", rule_r3.recipes);\n  }\n}\n\nfunction RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_ng_template_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"None\");\n  }\n}\n\nfunction RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"clr-dg-row-detail\")(1, \"div\")(2, \"div\", 20);\n    i0.ɵɵtext(3, \" Default Pattern: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_div_4_Template, 2, 1, \"div\", 21);\n    i0.ɵɵelementStart(5, \"div\")(6, \"div\", 20);\n    i0.ɵɵtext(7, \" Patterns: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_ul_8_Template, 2, 1, \"ul\", 21);\n    i0.ɵɵtemplate(9, RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_ng_template_9_Template, 1, 0, \"ng-template\", null, 22, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\")(12, \"div\", 20);\n    i0.ɵɵtext(13, \" Recipes: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_ul_14_Template, 2, 1, \"ul\", 21);\n    i0.ɵɵtemplate(15, RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_ng_template_15_Template, 1, 0, \"ng-template\", null, 23, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const _r9 = i0.ɵɵreference(10);\n\n    const _r12 = i0.ɵɵreference(16);\n\n    const rule_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", rule_r3.DefaultPattern)(\"ngIfElse\", _r9);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", rule_r3.Patterns)(\"ngIfElse\", _r9);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", rule_r3.recipes)(\"ngIfElse\", _r12);\n  }\n}\n\nfunction RulesComponent_clr_tab_content_5_clr_dg_row_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"clr-dg-row\")(1, \"clr-dg-cell\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"clr-dg-cell\");\n    i0.ɵɵtemplate(4, RulesComponent_clr_tab_content_5_clr_dg_row_29_span_4_Template, 2, 1, \"span\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"clr-dg-cell\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"clr-dg-cell\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"clr-dg-cell\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"clr-dg-cell\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"clr-dg-cell\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"clr-dg-cell\");\n    i0.ɵɵtemplate(16, RulesComponent_clr_tab_content_5_clr_dg_row_29_clr_dg_row_detail_16_Template, 17, 6, \"clr-dg-row-detail\", 18);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const rule_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(rule_r3.Name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", rule_r3.Tags);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(rule_r3.FileType);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(rule_r3.Target);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(rule_r3.Advice);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(rule_r3.Effort);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(rule_r3.Category);\n  }\n}\n\nconst _c0 = function () {\n  return [25, 50, 100];\n};\n\nfunction RulesComponent_clr_tab_content_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"clr-tab-content\")(1, \"div\")(2, \"clr-datagrid\", 4)(3, \"clr-dg-action-bar\")(4, \"div\", 5)(5, \"div\", 6);\n    i0.ɵɵelement(6, \"app-excel-export\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 8)(8, \"cds-search\", 9)(9, \"label\");\n    i0.ɵɵtext(10, \"Search\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function RulesComponent_clr_tab_content_5_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.searchCrit = $event);\n    });\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(12, \"clr-dg-column\", 11);\n    i0.ɵɵtext(13, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"clr-dg-column\", 11);\n    i0.ɵɵtext(15, \"Tags \");\n    i0.ɵɵelement(16, \"clr-dg-string-filter\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"clr-dg-column\", 11);\n    i0.ɵɵtext(18, \"FileType\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"clr-dg-column\", 11);\n    i0.ɵɵtext(20, \"Target\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"clr-dg-column\", 11);\n    i0.ɵɵtext(22, \"Advice\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"clr-dg-column\", 11);\n    i0.ɵɵtext(24, \"Effort\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"clr-dg-column\", 11);\n    i0.ɵɵtext(26, \"Category\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"clr-dg-column\", 11);\n    i0.ɵɵtext(28, \"Criticality\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(29, RulesComponent_clr_tab_content_5_clr_dg_row_29_Template, 17, 7, \"clr-dg-row\", 13);\n    i0.ɵɵpipe(30, \"searchFilter\");\n    i0.ɵɵelementStart(31, \"clr-dg-footer\")(32, \"clr-dg-pagination\", 14, 15)(34, \"clr-dg-page-size\", 16);\n    i0.ɵɵtext(35, \"Rules per page\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(36);\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const _r2 = i0.ɵɵreference(33);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"data\", ctx_r0.rules)(\"file_name\", \"rules-summary.csv\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.searchCrit);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"clrDgField\", \"Name\")(\"clrDgColType\", \"string\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"clrDgField\", \"Tags\")(\"clrDgColType\", \"string\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"clrDgStringFilter\", ctx_r0.tagFilter);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"clrDgField\", \"FileType\")(\"clrDgColType\", \"string\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"clrDgField\", \"Target\")(\"clrDgColType\", \"string\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"clrDgField\", \"Advice\")(\"clrDgColType\", \"string\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"clrDgField\", \"Effort\")(\"clrDgColType\", \"number\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"clrDgField\", \"Category\")(\"clrDgColType\", \"string\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"clrDgField\", \"Criticality\")(\"clrDgColType\", \"string\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"clrDgItemsOf\", i0.ɵɵpipeBind3(30, 26, ctx_r0.rules, \"name\", ctx_r0.searchCrit));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"clrDgPageSize\", 25);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"clrPageSizeOptions\", i0.ɵɵpureFunction0(30, _c0));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\" \", _r2.firstItem + 1, \" - \", _r2.lastItem + 1, \" of \", _r2.totalItems, \" rules \");\n  }\n}\n\nexport let RulesComponent = /*#__PURE__*/(() => {\n  class RulesComponent {\n    constructor(router, rulesService, toastr) {\n      this.router = router;\n      this.rulesService = rulesService;\n      this.toastr = toastr;\n      this.rules = [];\n      this.searchCrit = '';\n      this.tagFilter = new TagFilter();\n      ClarityIcons.addIcons(downloadIcon);\n    }\n\n    ngOnInit() {\n      this.fetchRules();\n    }\n\n    fetchRules() {\n      this.rulesService.getRules().subscribe(rulesReturned => {\n        /* istanbul ignore else */\n        if (rulesReturned.rules) {\n          this.rules = rulesReturned.rules;\n        }\n      }, error => {\n        pushErrorNotification(error, this.toastr);\n      });\n    }\n\n  }\n\n  RulesComponent.ɵfac = function RulesComponent_Factory(t) {\n    return new (t || RulesComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.RulesService), i0.ɵɵdirectiveInject(i3.ToastrService));\n  };\n\n  RulesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RulesComponent,\n    selectors: [[\"app-rules\"]],\n    decls: 6,\n    vars: 0,\n    consts: [[1, \"rules-tabs\"], [1, \"rules-tab\"], [\"clrTabLink\", \"\"], [4, \"clrIfActive\"], [1, \"rules-grid\"], [1, \"action-bar\"], [1, \"action-bar-item-left\"], [3, \"data\", \"file_name\"], [1, \"action-bar-item-right\"], [\"control-width\", \"shrink\"], [\"type\", \"search\", 3, \"ngModel\", \"ngModelChange\"], [3, \"clrDgField\", \"clrDgColType\"], [\"id\", \"tagFilterCustom\", 3, \"clrDgStringFilter\"], [4, \"clrDgItems\", \"clrDgItemsOf\"], [3, \"clrDgPageSize\"], [\"pagination\", \"\"], [3, \"clrPageSizeOptions\"], [\"class\", \"badge badge-tag\", 4, \"ngFor\", \"ngForOf\"], [4, \"clrIfExpanded\"], [1, \"badge\", \"badge-tag\"], [2, \"font-weight\", \"bold\"], [4, \"ngIf\", \"ngIfElse\"], [\"nopattern\", \"\"], [\"norecipe\", \"\"], [4, \"ngFor\", \"ngForOf\"], [3, \"href\"]],\n    template: function RulesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"clr-tabs\")(2, \"clr-tab\", 1)(3, \"button\", 2);\n        i0.ɵɵtext(4, \"Rules\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(5, RulesComponent_clr_tab_content_5_Template, 37, 31, \"clr-tab-content\", 3);\n        i0.ɵɵelementEnd()()();\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.DefaultValueAccessor, i5.NgControlStatus, i6.ClrDatagrid, i6.ClrDatagridActionBar, i6.ClrDatagridColumn, i6.ClrDatagridItems, i6.ClrDatagridRow, i6.ClrDatagridRowDetail, i6.ÇlrDatagridDetailRegisterer, i6.ClrDatagridCell, i6.ClrDatagridFooter, i6.ClrDatagridPagination, i6.ClrDatagridPageSize, i6.ÇlrDatagridMainRenderer, i6.ÇlrDatagridHeaderRenderer, i6.ÇlrDatagridRowRenderer, i6.ÇlrDatagridCellRenderer, i6.ÇlrDatagridWillyWonka, i6.ÇlrActionableOompaLoompa, i6.ÇlrExpandableOompaLoompa, i6.DatagridStringFilter, i6.ClrIfActive, i6.ClrIfExpanded, i6.ClrLabel, i6.ClrTabContent, i6.ClrTab, i6.ClrTabs, i6.ClrTabLink, i6.ÇlrTabsWillyWonka, i6.ÇlrActiveOompaLoompa, i5.NgModel, i7.ExcelExportComponent, i8.SearchFilterPipe],\n    styles: [\".rules-tab[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;padding:14px 0 0;height:36px;left:25px}.rules-tabs[_ngcontent-%COMP%]{padding-top:10px}.rules-grid-divider[_ngcontent-%COMP%]{height:1px;left:0%;right:0%;top:448px;background:#CCCCCC}.rules-grid[_ngcontent-%COMP%]{display:flex}.rules-grid-export[_ngcontent-%COMP%]{width:74px;height:36px;left:25px;top:552px}.action-bar[_ngcontent-%COMP%]{display:flex}.action-bar-item-left[_ngcontent-%COMP%]{width:80%}.action-bar-item-right[_ngcontent-%COMP%]{width:20%}.badge-tag[_ngcontent-%COMP%]{background-color:#fff;color:#565656;border:1px solid #004A70;box-sizing:border-box;border-radius:11px}\"]\n  });\n  return RulesComponent;\n})();\n\nclass TagFilter {\n  accepts(ruleRow, search) {\n    // @ts-ignore\n\n    /* istanbul ignore else */\n    if (ruleRow.Tags) {\n      return ruleRow.Tags.filter(tag => tag.Value.toLowerCase().includes(search)).length > 0;\n    }\n\n    return false;\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}